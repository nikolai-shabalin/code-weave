7\. Определение сетки[](#grid-definition)
-----------------------------------------

### 7.1. Явная сетка[](#explicit-grids)

Три свойства [grid-template-rows](#propdef-grid-template-rows), [grid-template-columns](#propdef-grid-template-columns) и [grid-template-areas](#propdef-grid-template-areas) вместе определяют явную сетку [контейнера сетки](#grid-container), указывая его явные пути сетки. Итоговая сетка может оказаться больше из-за [элементов сетки](#grid-item), размещенных за пределами [явной сетки](#explicit-grid); в этом случае будут созданы неявные дорожки, размер которых определяется свойствами [grid-auto-rows](#propdef-grid-auto-rows) и [grid-auto-columns](#propdef-grid-auto-columns).

Размер [явной сетки](#explicit-grid) определяется как большее из числа строк/столбцов, определенных [grid-template-areas](#propdef-grid-template-areas), и числа строк/столбцов, определенных [grid-template-rows](#propdef-grid-template-rows)/[grid-template-columns](#propdef-grid-template-columns). Любые строки/столбцы, определенные через grid-template-areas, но не имеющие размеров через grid-template-rows/grid-template-columns, получают свои размеры из свойств [grid-auto-rows](#propdef-grid-auto-rows)/[grid-auto-columns](#propdef-grid-auto-columns). Если эти свойства не определяют _ни одного_ явного пути, то явная сетка все равно содержит по одной [линии сетки](#grid-line) на каждой оси.

Числовые индексы в свойствах [grid-placement properties](#grid-placement-property) отсчитываются от краев [explicit grid](#explicit-grid). Положительные индексы отсчитываются со стороны [start](https://www.w3.org/TR/css-writing-modes-3/#start) (начиная с 1 для самой начальной явной линии), а отрицательные - со стороны [end](https://www.w3.org/TR/css-writing-modes-3/#end) (начиная с -1 для самой конечной явной линии).

Свойства [grid](#propdef-grid) и [grid-template](#propdef-grid-template) - это [стенограммы](https://www.w3.org/TR/css-cascade-4/#shorthand-property), которые можно использовать для установки всех трех явных свойств сетки ([grid-template-rows](#propdef-grid-template-rows), [grid-template-columns](#propdef-grid-template-columns) и [grid-template-areas](#propdef-grid-template-areas)) в одно и то же время. Сокращение grid также сбрасывает свойства, управляющие [implicit grid](#implicit-grid), тогда как свойство grid-template оставляет их неизменными.

### 7.2. Явное изменение размера дорожек: свойства [grid-template-rows](#propdef-grid-template-rows) и [grid-template-columns](#propdef-grid-template-columns)[](#track-sizing)

| | |
| --- | --- |
| Имя: | grid-template-columns, grid-template-rows |
| [Значение:](https://www.w3.org/TR/css-values/#value-defs) | none [\|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;track-list&gt;](#typedef-track-list)\| [&lt;auto-track-list&gt;](#typedef-auto-track-list)\| subgrid [&lt;line-name-list&gt;](#typedef-line-name-list)[?](https://www.w3.org/TR/css-values-4/#mult-opt)|
| [Initial:](https://www.w3.org/TR/css-cascade/#initial-values) | none |
| Применяется к: | [контейнерам сетки](#grid-container)|
| [Наследуется:](https://www.w3.org/TR/css-cascade/#inherited-property) | нет |
| [Проценты:](https://www.w3.org/TR/css-values/#percentages)| относятся к соответствующему размеру области содержимого |
| [Вычисленное значение:](https://www.w3.org/TR/css-cascade/#computed)| ключевое слово [none](#valdef-grid-template-rows-none) или [вычисленный список дорожек](#computed-track-list)|
| Канонический порядок: | согласно грамматике |
| [Тип анимации:](https://www.w3.org/TR/web-animations/#animation-type)| если длины списков совпадают, по типу вычисленного значения для каждого элемента в [вычисленном списке дорожек](#computed-track-list) (см. [§ 7.2.5 Вычисленное значение списка дорожек](#computed-tracks) и [§ 7.2.3.3 Интерполяция/комбинация repeat()](#repeat-interpolation)); дискретно иначе |

Эти свойства задают в виде списка дорожек, разделенных пробелами, [имена строк](#line-name) и [функции размера дорожек](#grid-template-rows-track-sizing-function) [сетки](#grid). Свойство [grid-template-columns](#propdef-grid-template-columns) задает [список дорожек](#track-list) для столбцов сетки, а [grid-template-rows](#propdef-grid-template-rows) - список дорожек для строк сетки.

Значения имеют следующие значения:

none

Указывает, что с помощью этого свойства не создаются [явные](#explicit-grid) дорожки сетки (хотя явные дорожки сетки все же могут быть созданы с помощью [grid-template-areas](#propdef-grid-template-areas)).

Примечание: В отсутствие [явной сетки](#explicit-grid) любые строки/столбцы будут [неявно сгенерированы](#implicit-grids), а их размер будет определяться свойствами [grid-auto-rows](#propdef-grid-auto-rows) и [grid-auto-columns](#propdef-grid-auto-columns).

[&lt;track-list&gt;](#typedef-track-list) | [&lt;auto-track-list&gt;](#typedef-auto-track-list)[](#track-listing)

Определяет [список дорожек](#track-list) как серию [функций размера дорожек](#grid-template-rows-track-sizing-function) и [имен строк](#line-name). Каждая функция размера дорожки может быть задана как длина, процент от размера [контейнера сетки](#grid-container), измерение содержимого, занимающего столбец или строку, или доля свободного пространства в сетке. Его также можно задать в виде диапазона, используя нотацию [minmax()](#valdef-grid-template-columns-minmax), которая может сочетать любой из ранее упомянутых механизмов для задания отдельных [min](#min-track-sizing-function) и [max track sizing functions](#max-track-sizing-function) для столбца или строки.

subgrid [&lt;line-name-list&gt;](#typedef-line-name-list)?[](#subgrid-listing)

Значение subgrid указывает, что сетка будет принимать охваченную часть своей [родительской сетки](#parent-grid) по данной оси (оси subgridded). Размеры строк/столбцов сетки не указываются явно, а берутся из определения родительской сетки, а элементы [subgrid](#subgrid) будут участвовать в вычислениях [внутренних размеров](https://www.w3.org/TR/css-grid-1/#algo-content) ([CSS Grid Layout 1 §11.5 Resolve Intrinsic Track Sizes](https://www.w3.org/TR/css-grid-1/#algo-content)]) всех дорожек, общих с родительской сеткой. По сути, подсетки предоставляют возможность передавать параметры сетки вниз через вложенные элементы и информацию о размерах на основе содержимого обратно в родительскую сетку.

Аргумент [&lt;line-name-list&gt;](#typedef-line-name-list) позволяет локально именовать линии сетки, общие с [родительской сеткой](#parent-grid): если задан &lt;line-name-list&gt;, указанные [&lt;line-names&gt;](#typedef-line-names) назначаются линиям [subgrid](#subgrid) [явной сетки](#explicit-grid), по одной на линию, начиная со строки 1. Лишние &lt;имена линий&gt; игнорируются.

Если нет [родительской сетки](#parent-grid), это значение эквивалентно начальному значению, [none](#valdef-grid-template-rows-none), а контейнер [сетки](#grid-container) не является [subgrid](#subgrid).

Ось, которая не является [subgridded](#subgridded-axis), является отдельной осью.

Синтаксис [списка треков](#track-list) следующий:

&lt;track-list&gt; = \[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt)\[ [&lt;track-size&gt;](#typedef-track-size) [|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;track-repeat&gt;](#typedef-track-repeat)\] \][+](https://www.w3.org/TR/css-values-4/#mult-one-plus) [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt)
&lt;auto-track-list&gt; = \[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) \[ [&lt;fixed-size&gt;](#typedef-fixed-size) [|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;fixed-repeat&gt;](#typedef-fixed-repeat)\] \][*](https://www.w3.org/TR/css-values-4/#mult-zero-plus) [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) [&lt;auto-repeat&gt;](#typedef-auto-repeat)
\[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt)\[ [&lt;fixed-size&gt;](#typedef-fixed-size) [|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;fixed-repeat&gt;](#typedef-fixed-repeat)\] \][*](https://www.w3.org/TR/css-values-4/#mult-zero-plus) [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt)
&lt;explicit-track-list&gt; = \[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) [&lt;track-size&gt;](#typedef-track-size)\][+](https://www.w3.org/TR/css-values-4/#mult-one-plus) [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt)

&lt;line-name-list&gt; = \[ [&lt;line-names&gt;](#typedef-line-names) [|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;name-repeat&gt;](#typedef-name-repeat)\][+](https://www.w3.org/TR/css-values-4/#mult-one-plus)
&lt;track-size&gt; = [&lt;track-breadth&gt;](#typedef-track-breadth) [|](https://www.w3.org/TR/css-values-4/#comb-one) minmax( [&lt;inflexible-breadth&gt;](#typedef-inflexible-breadth) [,](https://www.w3.org/TR/css-values-4/#comb-comma) [&lt;track-breadth&gt;](#typedef-track-breadth) ) [|](https://www.w3.org/TR/css-values-4/#comb-one) fit-content( [&lt;length-percentage&gt;](https://www.w3.org/TR/css-values-4/#typedef-length-percentage) )
&lt;fixed-size&gt; = [&lt;fixed-breadth&gt;](#typedef-fixed-breadth) [|](https://www.w3.org/TR/css-values-4/#comb-one) minmax( [&lt;fixed-breadth&gt;](#typedef-fixed-breadth) [,](https://www.w3.org/TR/css-values-4/#comb-comma) [&lt;track-breadth&gt;](#typedef-track-breadth) ) [|](https://www.w3.org/TR/css-values-4/#comb-one) minmax( [&lt;inflexible-breadth&gt;](#typedef-inflexible-breadth) [,](https://www.w3.org/TR/css-values-4/#comb-comma) [&lt;fixed-breadth&gt;](#typedef-fixed-breadth) )
&lt;track-breadth&gt; = [&lt;length-percentage&gt;](https://www.w3.org/TR/css-values-4/#typedef-length-percentage) [|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;flex&gt;](#typedef-flex "Expands to: fr") [|](https://www.w3.org/TR/css-values-4/#comb-one) min-content [|](https://www.w3.org/TR/css-values-4/#comb-one) max-content [|](https://www.w3.org/TR/css-values-4/#comb-one) auto
&lt;inflexible-breadth&gt; = [&lt;length-percentage&gt;](https://www.w3.org/TR/css-values-4/#typedef-length-percentage) [|](https://www.w3.org/TR/css-values-4/#comb-one) min-content [|](https://www.w3.org/TR/css-values-4/#comb-one) max-content [|](https://www.w3.org/TR/css-values-4/#comb-one) auto
&lt;fixed-breadth&gt; = [&lt;length-percentage&gt;](https://www.w3.org/TR/css-values-4/#typedef-length-percentage)
&lt;line-names&gt; = '\[' [&lt;custom-ident&gt;](https://www.w3.org/TR/css-values-4/#identifier-value)[*](https://www.w3.org/TR/css-values-4/#mult-zero-plus) '\]'

Где значения компонентов определяются следующим образом...

#### 7.2.1. Размеры дорожек[](#track-sizes)

[&lt;length-percentage&gt;](https://www.w3.org/TR/css-values-4/#typedef-length-percentage)[](#valdef-grid-template-columns-length-percentage)

Неотрицательная длина или процент, как определено в CSS3 Values. [\[CSS-VALUES-3\]](#biblio-css-values-3)

Значения [&lt;percentage&gt;](https://www.w3.org/TR/css-values-3/#percentage-value) относятся к [внутреннему](https://www.w3.org/TR/css-sizing-3/#inner-size) [inline size](https://www.w3.org/TR/css-writing-modes-4/#inline-size) [контейнера сетки](#grid-container) в столбцах [дорожек сетки](#grid-track), и внутреннему [block size](https://www.w3.org/TR/css-writing-modes-4/#block-size) контейнера сетки в дорожках сетки строк. Если размер контейнера сетки зависит от размера его дорожек, то &lt;процент&gt; должен рассматриваться как [auto](https://www.w3.org/TR/css-sizing-3/#valdef-width-auto), для вычисления собственных размеров контейнера сетки и затем разрешаться относительно этого результирующего размера контейнера сетки для размещения [grid](#grid) и его элементов.

[&lt;flex&gt;](#typedef-flex "Expands to: fr")[](#valdef-grid-template-columns-flex)

Неотрицательная величина с единицей измерения [fr](#valdef-flex-fr), определяющая коэффициент изгиба дорожки. Каждая дорожка размера [&lt;flex&gt;](#typedef-flex "Expands to: fr") занимает часть оставшегося пространства пропорционально своему [flex factor](#grid-template-columns-flex-factor). Например, если список дорожек имеет размер 1fr 2fr, то они займут ⅓ и ⅔ от [оставшегося пространства](#leftover-space) соответственно. Подробнее см. в [§ 7.2.4 Гибкие длины: единица fr](#fr-unit).

Примечание: Если сумма [flex factors](#grid-template-columns-flex-factor) меньше 1, они будут занимать только соответствующую часть [leftover space](#leftover-space), а не расширяться, заполняя все пространство.

При появлении вне нотации [minmax()](#valdef-grid-template-columns-minmax) подразумевает автоматический минимум (например, ''minmax(auto, [&lt;flex&gt;](#typedef-flex "Expands to: fr"))'').

minmax(min, max)

Определяет диапазон размеров, больший или равный min и меньший или равный max. Если max меньше min, то max будет перекрываться min (по сути, получается minmax(min, min)). В качестве максимума значение [&lt;flex&gt;](#typedef-flex "Expands to: fr") устанавливает [flex factor](#grid-template-columns-flex-factor) дорожки; в качестве минимума оно недействительно.

Примечание: Будущий уровень этой спецификации может разрешить [&lt;flex&gt;](#typedef-flex "Expands to: fr") минимумы, и будет обновлен [алгоритм определения размера дорожки](#track-sizing-algorithm), чтобы учесть это правильно

auto

Как _максимум_: представляет собой наибольший вклад [max-content](https://www.w3.org/TR/css-sizing-3/#max-content-contribution) из [элементов сетки](#grid-item), занимающих [дорожку сетки](#grid-track); однако, в отличие от [max-content](#valdef-grid-template-columns-max-content), позволяет расширять дорожку свойствами [align-content](https://www.w3.org/TR/css-align-3/#propdef-align-content) и [justify-content](https://www.w3.org/TR/css-align-3/#propdef-justify-content).

Как _минимум_: представляет собой наибольший [минимальный размер](https://www.w3.org/TR/css-sizing-3/#min-width) (заданный [min-width](https://www.w3.org/TR/CSS2/visudet.html#propdef-min-width)/[min-height](https://www.w3.org/TR/CSS2/visudet.html#propdef-min-height)) из [элементов сетки](#grid-item), занимающих [дорожку сетки](#grid-track). (Изначально это значение часто, но не всегда, равно минимальному [min-content](#valdef-grid-template-columns-min-content) - смотрите [§ 6.6 Автоматический минимальный размер элементов сетки](#min-size-auto).)

При появлении вне нотации [minmax()](#valdef-grid-template-columns-minmax): эквивалентно minmax(auto, auto), представляя диапазон между минимумом и максимумом, описанным выше. (В самых простых случаях ведет себя аналогично minmax(min-content, max-content), но с дополнительными возможностями).

max-content

Представляет наибольший [max-content вклад](https://www.w3.org/TR/css-sizing-3/#max-content-contribution) из [элементов сетки](#grid-item), занимающих [дорожку сетки](#grid-track).

min-content

Представляет наибольший [min-content contribution](https://www.w3.org/TR/css-sizing-3/#min-content-contribution) из [элементов сетки](#grid-item), занимающих [grid track](#grid-track).

fit-content( [&lt;length-percentage&gt;](https://www.w3.org/TR/css-values-4/#typedef-length-percentage) )

Представляет формулу `max(minimum, min(limit, [max-content](#valdef-grid-template-columns-max-content)))`, где minimum представляет собой [auto](#valdef-grid-template-columns-auto) минимум (который часто, но не всегда, равна [min-content](#valdef-grid-template-columns-min-content) минимуму), а limit - это [функция изменения размера дорожки](#grid-template-rows-track-sizing-function), переданная в качестве аргумента в [fit-content()](#valdef-grid-template-columns-fit-content). По сути, это вычисляется как меньшее из minmax(auto, max-content) и minmax(auto, limit).

[](#example-6651406f)Учитывая следующее объявление [grid-template-columns](#propdef-grid-template-columns):

grid-template-columns: 100px 1fr max-content minmax(min-content, 1fr);

Создается пять линий сетки:

1.  На начальном краю [контейнера сетки](#grid-container).
2.  В 100px от начального края [контейнера сетки](#grid-container).
3.  На расстоянии от предыдущей строки, равном половине [свободного пространства](#free-space) (ширина [контейнера сетки](#grid-container), минус ширина негибких [дорожек сетки](#grid-track)).
4.  Расстояние от предыдущей строки, равное максимальному размеру любых [элементов сетки](#grid-item), принадлежащих столбцу между этими двумя строками.
5.  Расстояние от предыдущей строки не меньше минимального размера любых [элементов сетки](#grid-item), принадлежащих столбцу между этими двумя строками, но не больше второй половины [свободного пространства](#free-space).

Если негибкие размеры (100px, [max-content](#valdef-grid-template-columns-max-content) и [min-content](#valdef-grid-template-columns-min-content)) в сумме превышают ширину [контейнера сетки](#grid-container), то конечная линия [сетки](#grid-line) будет находиться на расстоянии, равном их сумме, от начального края контейнера сетки (размеры 1fr оба разрешаются в 0). Если сумма меньше ширины контейнера сетки, то конечная линия сетки будет находиться точно на конечном краю контейнера сетки. Это справедливо в общем случае, когда среди размеров [grid track](#grid-track) есть хотя бы одно значение [&lt;flex&gt;](#typedef-flex "Expands to: fr").

[](#example-337b574e)Дополнительные примеры допустимых определений [grid track](#grid-track):

/\* примеры допустимых определений дорожек */
grid-template-rows: 1fr minmax(min-content, 1fr);
grid-template-rows: 10px repeat(2, 1fr auto minmax(30%, 1fr));
grid-template-rows: calc(4em - 5px);

Примечание: Размер сетки не является чисто суммой размеров дорожек, так как [row-gap](https://www.w3.org/TR/css-align-3/#propdef-row-gap), [column-gap](https://www.w3.org/TR/css-align-3/#propdef-column-gap) и [justify-content](https://www.w3.org/TR/css-align-3/#propdef-justify-content), [align-content](https://www.w3.org/TR/css-align-3/#propdef-align-content) могут добавлять дополнительное пространство между дорожками.

#### 7.2.2. Именование линий сетки: синтаксис \[[&lt;custom-ident&gt;](https://www.w3.org/TR/css-values-4/#identifier-value)*\][](#named-lines)

Хотя на [линии сетки](#grid-line) всегда можно ссылаться по их числовому индексу, имена линий могут облегчить понимание и поддержку [свойств смещения сетки](#grid-placement-property). [Имена линий](#line-name) могут быть явно назначены с помощью свойств [grid-template-rows](#propdef-grid-template-rows) и [grid-template-columns](#propdef-grid-template-columns), или [неявно назначены](#implicitly-assigned-line-name) с помощью [named grid areas](#named-grid-area) с помощью свойства [grid-template-areas](#propdef-grid-template-areas).

[](#example-1cbfee50)Например, следующий код дает осмысленные имена всем линиям в сетке. Обратите внимание, что некоторые строки имеют несколько имен.

#grid {
display: grid;
grid-template-columns: \[first nav-start\] 150px \[main-start\] 1fr \[last\];
grid-template-rows: \[первый header-start\] 50px \[main-start\] 1fr \[footer-start\] 50px \[last\];
}

![Изображение: Именованные линии сетки.](images/grid-named-lines.png)

Именованные линии сетки.

Имя [линии](#line-name) не может быть span или auto, т.е. [&lt;custom-ident&gt;](https://www.w3.org/TR/css-values-4/#identifier-value) в производстве [&lt;line-names&gt;](#typedef-line-names) исключает ключевые слова span и auto.

#### 7.2.3. Повторяющиеся строки и столбцы: нотация [repeat()](#funcdef-repeat)[](#repeat-notation)

Нотация repeat() представляет собой повторяющийся фрагмент [списка треков](#track-list), позволяя записать большое количество столбцов или строк, которые демонстрируют повторяющийся шаблон, в более компактной форме.

[](#example-e3dc5d22)В этом примере показаны два эквивалентных способа записи одного и того же определения сетки. Оба объявления создают четыре "основных" столбца, каждый шириной 250px, окруженные 10px "водосточными" столбцами.

grid-template-columns: 10px \[col-start\] 250px \[col-end\]
10px \[col-start\] 250px \[col-end\]
10px \[col-start\] 250px \[col-end\]
10px \[col-start\] 250px \[col-end\] 10px;
/\* то же самое, что и выше, только проще */
grid-template-columns: repeat(4, 10px \[col-start\] 250px \[col-end\]) 10px;

##### 7.2.3.1. Синтаксис [repeat()](#funcdef-repeat)[](#repeat-syntax)

Общая форма синтаксиса [repeat()](#funcdef-repeat) примерно такова,

repeat( \[ [&lt;integer \[1,∞\]&gt;](https://www.w3.org/TR/css-values-3/#integer-value) [|](https://www.w3.org/TR/css-values-4/#comb-one) auto-fill [|](https://www.w3.org/TR/css-values-4/#comb-one) auto-fit \] [,](https://www.w3.org/TR/css-values-4/#comb-comma) [&lt;track-list&gt;](#typedef-track-list) )

Первый аргумент задает количество повторений. Второй аргумент - это [список треков](#track-list), который повторяется столько же раз. Однако есть некоторые ограничения:

* Нотация [repeat()](#funcdef-repeat) не может быть вложенной.

* Автоматические повторы ([auto-fill](#valdef-repeat-auto-fill) или [auto-fit](#valdef-repeat-auto-fit)) нельзя комбинировать с размерами [intrinsic](#intrinsic-sizing-function) или [flexible](#flexible-sizing-function).


Таким образом, точный синтаксис нотации [repeat()](#funcdef-repeat) имеет несколько форм:

[&lt;track-repeat&gt;](#typedef-track-repeat) = repeat( \[ [&lt;integer \[1,∞\]&gt;](https://www.w3.org/TR/css-values-3/#integer-value)\] [,](https://www.w3.org/TR/css-values-4/#comb-comma) \[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) [&lt;track-size&gt;](#typedef-track-size) \][+](https://www.w3.org/TR/css-values-4/#mult-one-plus) [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) )
[&lt;auto-repeat&gt;](#typedef-auto-repeat) = repeat( \[ auto-fill [|](https://www.w3.org/TR/css-values-4/#comb-one) auto-fit \] [,](https://www.w3.org/TR/css-values-4/#comb-comma) \[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) [&lt;fixed-size&gt;](#typedef-fixed-size) \][+](https://www.w3.org/TR/css-values-4/#mult-one-plus) [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) )
[&lt;fixed-repeat&gt;](#typedef-fixed-repeat) = repeat( \[ [&lt;integer \[1,∞\]&gt;](https://www.w3.org/TR/css-values-3/#integer-value)\] [,](https://www.w3.org/TR/css-values-4/#comb-comma)\[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) [&lt;fixed-size&gt;](#typedef-fixed-size)\][+](https://www.w3.org/TR/css-values-4/#mult-one-plus) [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) )
[&lt;name-repeat&gt;](#typedef-name-repeat) = repeat( \[ [&lt;integer \[1,∞\]&gt;](https://www.w3.org/TR/css-values-3/#integer-value) [|](https://www.w3.org/TR/css-values-4/#comb-one) auto-fill \][,](https://www.w3.org/TR/css-values-4/#comb-comma) [&lt;line-names&gt;](#typedef-line-names)[+](https://www.w3.org/TR/css-values-4/#mult-one-plus))

* Вариант [&lt;track-repeat&gt;](#typedef-track-repeat) может представлять повторение любого [&lt;track-size&gt;](#typedef-track-size), но ограничен фиксированным числом повторений.

* Вариант [&lt;auto-repeat&gt;](#typedef-auto-repeat) может автоматически повторяться для заполнения пространства, но требует [определенного](https://www.w3.org/TR/css-sizing-3/#definite) размера дорожки, чтобы можно было рассчитать количество повторений. Он может появиться только один раз в [списке дорожек](#track-list), но тот же список дорожек может содержать [&lt;fixed-repeat&gt;](#typedef-fixed-repeat)ы.

* Вариант [&lt;name-repeat&gt;](#typedef-name-repeat) предназначен для добавления [имен строк](#line-name) в [подсети](#subgrid). Он может использоваться только с ключевым словом [subgrid](#valdef-grid-template-rows-subgrid) и не может указывать размеры дорожек, только имена строк.


Если функция [repeat()](#funcdef-repeat), не являющаяся [&lt;name-repeat&gt;](#typedef-name-repeat), помещает два [&lt;line-names&gt;](#typedef-line-names) рядом друг с другом, списки имен объединяются. Например, repeat(2, \[a\] 1fr \[b\]) эквивалентен \[a\] 1fr \[b a\] 1fr \[b\].

##### 7.2.3.2. Повторение-заполнение: [auto-fill](#valdef-repeat-auto-fill) и [auto-fit](#valdef-repeat-auto-fit) repetitions[](#auto-repeat)

На оси [subgridded axis](#subgridded-axis) ключевое слово [auto-fill](#valdef-repeat-auto-fill) действует только один раз на [&lt;line-name-list&gt;](#typedef-line-name-list), и повторяется достаточно раз, чтобы список имен соответствовал заданному [subgrid](#subgrid) [grid span](#grid-span) (возвращаясь к 0, если диапазон уже выполнен).

В противном случае на [отдельной оси](#standalone-axis), когда автозаполнение задано как число повторений, если [контейнер сетки](#grid-container) имеет [определенный](https://www.w3.org/TR/css-sizing-3/#definite) размер или максимальный размер по соответствующей оси, то число повторений - это наибольшее возможное положительное целое число, которое не приводит к переполнению [сетки](#grid) в [боксе содержимого](https://www.w3. org/TR/css-box-4/#content-box) своего контейнера сетки (рассматривая каждую дорожку как свою [максимальную функцию размера дорожки](#max-track-sizing-function), если она определена, или как свою минимальную функцию размера дорожки в противном случае, уменьшая максимальную функцию размера дорожки на [минимальную функцию размера дорожки](#min-track-sizing-function), если обе определены, и учитывая [gap](https://www.w3.org/TR/css-align-3/#propdef-gap)); если любое число повторений переполнится, то 1 повторение. В противном случае, если контейнер сетки имеет определенный минимальный размер по соответствующей оси, количество повторений равно наименьшему возможному положительному целому числу, удовлетворяющему этому минимальному требованию. В противном случае указанный [список дорожек](#track-list) повторяется только один раз.

[](#example-5bb26bd3)Например, следующий код создаст столько 25-символьных колонок, сколько поместится в ширину окна. Если останется свободное место, оно будет распределено между 25-символьными колонками.

тело {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(25ch, 1fr));
}

Ключевое слово auto-fit ведет себя так же, как [auto-fill](#valdef-repeat-auto-fill), за исключением того, что после [размещения элементов сетки](#auto-placement-algo) все пустые повторяющиеся дорожки [сворачиваются](#collapsed-track). Пустой дорожкой считается та, на которой нет элементов сетки, размещенных в потоке или проходящих по ней. (Это может привести к тому, что _все_ дорожки будут свернуты, если они все пусты).

Свернутая дорожка считается имеющей фиксированную [функцию размера дорожки](#grid-template-rows-track-sizing-function) 0px, а [желоба](https://www.w3.org/TR/css-align-3/#gutter) по обе стороны от нее - включая любое пространство, выделенное через [распределенное выравнивание](https://www.w3.org/TR/css-align-3/#distributed-alignment)-[коллапс](#collapsed-gutter).

Для определения количества автоповторяющихся дорожек в [standalone axis](#standalone-axis) UA должен уменьшить размер дорожки до заданного UA значения, чтобы избежать деления на ноль. Предполагается, что это значение должно быть 1px.

##### 7.2.3.3. Интерполяция/комбинация [repeat()](#funcdef-repeat)[](#repeat-interpolation)

Если две нотации [repeat()](#funcdef-repeat) имеют одинаковый первый аргумент (счетчик повторений) и одинаковое количество треков во втором аргументе (список треков), они объединяются путем объединения каждого компонента их [вычисленных списков треков](#computed-track-list) [по вычисленному значению](https://www.w3.org/TR/web-animations-1/#by-computed-value) (так же, как объединение трек-листа верхнего уровня). В противном случае они объединяются [дискретно](https://www.w3.org/TR/web-animations-1/#discrete).

#### 7.2.4. Гибкие длины: единица [fr](#valdef-flex-fr)[](#fr-unit)

Гибкая длина[](#flexible-length) или [&lt;flex&gt;](#typedef-flex "Expands to: fr") - это размер с единицей fr, которая представляет собой часть [оставшегося пространства](#leftover-space) в [контейнере сетки](#grid-container). Дорожки с размером [fr](#valdef-flex-fr) называются гибкими дорожками, поскольку они сгибаются в ответ на оставшееся пространство подобно тому, как [flex items](https://www.w3.org/TR/css-flexbox-1/#flex-item) с нулевым базовым размером заполняют пространство в [flex container](https://www.w3.org/TR/css-flexbox-1/#flex-container).

Распределение [оставшегося пространства](#leftover-space) происходит после того, как все негибкие [функции изменения размера дорожек](#grid-template-rows-track-sizing-function) достигли своего максимума. Общий размер таких строк или столбцов вычитается из доступного пространства, образуя остаток, который затем делится между строками и столбцами с гибкими размерами пропорционально их [коэффициенту гибкости](#grid-template-columns-flex-factor).

Доля каждого столбца или строки в [оставшемся пространстве](#leftover-space) может быть вычислена как `<flex> * <оставшееся пространство> / <сумма всех [flex-факторов](#grid-template-columns-flex-factor)>`.

Значения [&lt;flex&gt;](#typedef-flex "Expands to: fr") между 0fr и 1fr имеют несколько особое поведение: когда сумма flex-факторов меньше 1, они будут занимать менее 100% оставшегося пространства.

Значение [&lt;flex&gt;](#typedef-flex "Expands to: fr") трека фактически является запросом на некоторую долю оставшегося пространства, при этом 1fr означает "100% оставшегося пространства"; тогда, если треки на этой оси запрашивают больше 100% в сумме, запросы перебалансируются, чтобы сохранить то же соотношение, но использовать ровно 100%. Однако если дорожки запрашивают _меньше_, чем полный объем (например, три дорожки по .25fr), то каждая из них получит именно то, что запрашивает (по 25 % оставшегося пространства каждой, а последние 25 % останутся незаполненными). Точные детали распределения оставшегося пространства см. в [§ 12.7 Расширение гибких дорожек](#algo-flex-tracks).

Этот паттерн необходим для непрерывного поведения по мере приближения значений [fr](#valdef-flex-fr) к нулю (что означает, что дорожкам нужно _ничего_ из оставшегося пространства). Без этого, дорожка в 1 фр заняла бы все свободное место; но так же поступила бы и дорожка в 0,1 фр, и дорожка в 0,01 фр, и т. д., пока, наконец, значение не станет достаточно малым, чтобы переполниться до нуля, и дорожка внезапно не займет все свободное место. При таком поведении дорожка постепенно занимает все меньше оставшегося пространства по мере того, как ее коэффициент изгиба уменьшается ниже 1fr, плавно переходя к тому, чтобы не занимать ничего из оставшегося пространства при нулевом значении.

Если такое поведение "частичного заполнения" не является _специфическим_ желаемым, авторам следует придерживаться значений ≥ 1; например, использование 1fr и 2fr обычно лучше, чем использование .33fr и .67fr, так как они с большей вероятностью будут вести себя как положено при добавлении или удалении дорожек.

Когда доступное пространство бесконечно (это происходит, когда ширина или высота [контейнера сетки](#grid-container) [неопределенная](https://www.w3.org/TR/css-sizing-3/#indefinite)), гибкие [дорожки сетки](#grid-track) подбираются по размеру их содержимого с сохранением соответствующих пропорций. Используемый размер каждой дорожки сетки с гибким размером вычисляется путем определения размера [max-content](#valdef-grid-template-columns-max-content) каждой дорожки сетки с гибким размером и деления этого размера на соответствующий [flex factor](#grid-template-columns-flex-factor) для определения "гипотетического размера 1fr". Максимальное из этих значений используется в качестве разрешенной длины 1fr (фракция flex), которая затем умножается на коэффициент flex каждой дорожки сетки для определения ее окончательного размера.

Примечание: значения [&lt;flex&gt;](#typedef-flex "Expands to: fr") не являются значениями [&lt;length&gt;](https://www.w3. org/TR/css-values-3/#length-value "Expands to: advance measure | cap | ch | cm | em | ex | ic | in | lh | mm | pc | pt | px | q | rem | rlh | vb | vh | vi | vmax | vmin | vw") (и они не совместимы с &lt;length&gt;, как некоторые [&lt;percentage&gt;](https://www. w3.org/TR/css-values-3/#percentage-value)), поэтому они не могут быть представлены в выражениях [calc()](https://www.w3.org/TR/css-values-4/#funcdef-calc) и сочетаться с другими типами единиц измерения.

#### 7.2.5. Вычисленное значение списка дорожек[](#computed-tracks)

Вычисленный список путей для [автономной оси](#standalone-axis) представляет собой [список](https://infra.spec.whatwg.org/#list), чередующий [наборы имен линий](#line-name-set) и [секции путей](#track-section), причем первый и последний элементы являются наборами имен линий.

Набор имен строк - это (потенциально пустой) [набор](https://infra.spec.whatwg.org/#ordered-set) идентификаторов, представляющих имена строк.

Секция пути - это либо:

* функциональная нотация [minmax()](#valdef-grid-template-columns-minmax), представляющая размер одной дорожки, с вычислением каждой [&lt;длины-процента&gt;](https://www.w3.org/TR/css-values-4/#typedef-length-percentage)

* функциональная нотация [repeat()](#funcdef-repeat), представляющая повторяющийся участок списка треков, с его [&lt;integer&gt;](https://www.w3.org/TR/css-values-3/#integer-value) вычисленным и его [&lt;track-list&gt;](#typedef-track-list) представленным как [computed track list](#computed-track-list).


[Вычисленный список путей](#computed-track-list) [субгрид-оси](#subgridded-axis) - это ключевое слово [subgrid](#valdef-grid-template-rows-subgrid), за которым следует [список](https://infra.spec.whatwg.org/#list) наборов [имен линий](#line-name-set), представляющих каждую линию на этой оси.

#### 7.2.6. Разрешенное значение списка дорожек[](#resolved-track-list)

Свойства [grid-template-rows](#propdef-grid-template-rows) и [grid-template-columns](#propdef-grid-template-columns) являются свойствами [resolved value special case properties](https://drafts.csswg.org/cssom-1/#resolved-value-special-case-property). [\[CSSOM\]](#biblio-cssom)

##### 7.2.6.1. Разрешенное значение отдельного трек-листа[](#resolved-track-list-standalone)

Когда элемент генерирует блок [grid-контейнер](#grid-container), [разрешенное значение](https://www.w3.org/TR/cssom/#resolved-values) его свойства [grid-template-rows](#propdef-grid-template-rows) или [grid-template-columns](#propdef-grid-template-columns) в [standalone axis](#standalone-axis) является [используемым значением](https://www.w3.org/TR/css-cascade-4/#used-value), сериализованным с:

* Каждый трек, перечисленный отдельно, как явно, так и неявно созданный, без использования нотации [repeat()](#funcdef-repeat).
* Размер каждой дорожки указан как длина в пикселях, независимо от функции изменения размера.
* Имена соседних строк сведены в единый набор скобок.

[](#issue-cccd0e19)Первый пункт вышеприведенного списка означает, что неявные дорожки сериализуются как часть [grid-template-rows](#propdef-grid-template-rows)/etc., несмотря на то, что автор _не может_ фактически указать неявные размеры дорожек в этих свойствах! Поэтому значения grid-template-rows и [grid-template-columns](#propdef-grid-template-columns) могут округляться некорректно:

const s = getComputedStyle(gridEl);
gridEl.style.gridTemplateRows = s.gridTemplateRows;
// Код, подобный этому, _должен_ быть безотказным,
// но если есть неявные строки,
// это преобразует их в явные строки,
// возможно, изменится расположение элементов сетки
// и изменит общий размер сетки!

Это случайное свойство ранней реализации, которое просочилось в последующие реализации без особого внимания. Мы намерены удалить его из спецификации, но только после того, как определим CSSOM API для получения информации о неявных дорожках, поскольку в настоящее время это единственный способ получить такую информацию, и ряд страниц полагается на него.

В противном случае (например, когда элемент имеет [display: none](https://www.w3.org/TR/css-display-3/#propdef-display) или не является [grid container](#grid-container)) разрешенное значение - это просто [computed value](https://www.w3.org/TR/css-cascade-4/#computed-value).

[](#example-d3b634e7)

<style>
#grid {
  width: 500px;
  grid-template-columns:
    \[a\] auto
    \[b\] minmax(min-content, 1fr)
    \[b c d\] repeat(2, \[e\] 40px)
            repeat(5, auto);
}
</style>
<div id="grid">
  <div style="grid-column-start: 1; width: 50px"></div>
  <div style="grid-column-start: 9; width: 50px"></div>
</div>
<script>
  var gridElement = document.getElementById("grid");
  getComputedStyle(gridElement).gridTemplateColumns;
  // \[a\] 50px \[b\] 320px \[b c d e\] 40px \[e\] 40px 0px 0px 0px 0px 50px
</script>

Примечание: В целом, разрешенные значения являются вычисленными значениями, за исключением небольшого списка унаследованных свойств 2.1. Однако совместимость с ранними реализациями этого модуля требует, чтобы мы определили [grid-template-rows](#propdef-grid-template-rows) и [grid-template-columns](#propdef-grid-template-columns) как возвращающие использованные значения.

[](#issue-e2bc4d57)Рабочая группа CSS рассматривает возможность возврата использованных значений для свойств [grid-placement](#grid-placement-property) и ищет отзывы, особенно от реализаторов. См. [обсуждение](https://github.com/w3c/csswg-drafts/issues/2681).

##### 7.2.6.2. Разрешенное значение подсеточного списка треков[](#resolved-track-list-subgrid)

Когда элемент генерирует блок [grid container](#grid-container), который является [subgrid](#subgrid), [разрешенное значение](https://drafts.csswg.org/cssom-1/#resolved-value) свойств [grid-template-rows](#propdef-grid-template-rows) и [grid-template-columns](#propdef-grid-template-columns) представляет собой [used](https://www.w3. org/TR/css-cascade-4/#used-value) количество столбцов, сериализованное в виде ключевого слова [subgrid](#valdef-grid-template-rows-subgrid), за которым следует список, представляющий каждую из его строк как [набор имен строк](#line-name-set) всех имен строк, явно определенных на подсерии (без учета тех, что взяты из [родительской сетки](#parent-grid)), без использования обозначения [repeat()](#funcdef-repeat).

[](#example-8cc1f771)Например, при применении к [subgrid](#subgrid) с [grid-column: span 4](#propdef-grid-column), каждый из следующих [grid-template-columns](#propdef-grid-template-columns) [specified values](https://www.w3.org/TR/css-cascade-4/#specified-value) становится соответствующим [resolved values](https://drafts.csswg.org/cssom-1/#resolved-value):

specified: subgrid \[a\] repeat(auto-fill, \[b\]) \[c\]
разрешено: подсеть \[a\] \[b\] \[b\] \[b\] \[b\] \[c\]

определено: subgrid \[a\] \[a\] \[a\] \[a\] repeat(auto-fill, \[b\]) \[c\] \[c\]
разрешено: подсеть \[a\] \[a\] \[a\] \[a\] \[a\] \[c\]

определено: подсистема \[\] \[a\]
разрешено: subgrid \[\] \[a\] \[\] \[\] \[\] \[\]

определено: подсистема \[a\] \[b\] \[c\] \[d\] \[e\] \[f\]
разрешено: подсистема \[a\] \[b\] \[c\] \[d\] \[e\]

Примечание: Это нарушает общий принцип "кратчайшей эквивалентной сериализации", поскольку сериализация пустых наборов имен строк [line-name-set](#line-name-set) предоставляет потенциально полезную информацию о том, сколько путей охватывает [subgrid](#subgrid).

### 7.3. Именованные области: свойство [grid-template-areas](#propdef-grid-template-areas)[](#grid-template-areas-property)

| | |
| --- | --- |
| Имя: | grid-template-areas |
| [Значение:](https://www.w3.org/TR/css-values/#value-defs) | none [\|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;string&gt;](https://www.w3.org/TR/css-values-3/#string-value)[+](https://www.w3.org/TR/css-values-4/#mult-one-plus)|
| [Initial:](https://www.w3.org/TR/css-cascade/#initial-values) | none |
| Применяется к: | [контейнерам сетки](#grid-container)|
| [Наследуется:](https://www.w3.org/TR/css-cascade/#inherited-property) | нет |
| [Проценты:](https://www.w3.org/TR/css-values/#percentages) | n/a |
| [Вычисленное значение:](https://www.w3.org/TR/css-cascade/#computed)| ключевое слово [none](#valdef-grid-template-areas-none) или список строковых значений |
| Канонический порядок: | согласно грамматике |
| [Тип анимации:](https://www.w3.org/TR/web-animations/#animation-type) | дискретный |

Это свойство определяет именованные области сетки, которые не связаны с каким-либо конкретным [элементом сетки](#grid-item), но на них можно ссылаться из свойств [grid-placement](#grid-placement-property). Синтаксис свойства [grid-template-areas](#propdef-grid-template-areas) также обеспечивает визуализацию структуры [grid](#grid), облегчая понимание общего расположения [grid-контейнера](#grid-container).

Значения имеют следующие значения:

none

Указывает, что никакие [именованные области сетки](#named-grid-area), а также никакие [явные дорожки сетки](#explicit-grid), не определяются этим свойством (хотя явные дорожки сетки все же могут быть созданы с помощью [grid-template-columns](#propdef-grid-template-columns) или [grid-template-rows](#propdef-grid-template-rows)).

Примечание: В отсутствие [явной сетки](#explicit-grid) любые строки/столбцы будут [неявно сгенерированы](#implicit-grids), а их размер будет определяться свойствами [grid-auto-rows](#propdef-grid-auto-rows) и [grid-auto-columns](#propdef-grid-auto-columns).

[&lt;string&gt;](https://www.w3.org/TR/css-values-3/#string-value)+[](#valdef-grid-template-areas-string)

Для каждой отдельной строки, указанной для свойства [grid-template-areas](#propdef-grid-template-areas), создается строка, а для каждой ячейки в строке - столбец, если разобрать ее следующим образом:

Токенизируйте строку в список следующих лексем, используя семантику наибольшего совпадения:

* Последовательность [кодовых точек имени](https://www.w3.org/TR/css-syntax-3/#name-code-point), представляющая маркер именованной ячейки с именем, состоящим из ее кодовых точек.
* Последовательность из одного или нескольких "." (U+002E FULL STOP), представляющая маркер нулевой ячейки.
* Последовательность [пробельных символов](https://www.w3.org/TR/css-syntax-3/#whitespace), ничего не обозначающая (не создает маркер).
* Последовательность любых других символов, представляющая маркер мусора.

Примечание: Эти правила могут создавать имена ячеек, которые не соответствуют синтаксису [&lt;ident&gt;](https://www.w3.org/TR/css-values-4/#typedef-ident), например "1st 2nd 3rd", что требует экранирования при ссылке на эти области по имени в других свойствах, например [grid-row: \\\31st;](#propdef-grid-row) для ссылки на область с именем 1st.

* Токен [нулевой ячейки](#grid-template-areas-null-cell-token) представляет собой неименованную область в [контейнере сетки](#grid-container).
* Токен [именованной ячейки](#grid-template-areas-named-cell-token) создает [именованную область сетки](#named-grid-area) с тем же именем. Несколько токенов именованных ячеек внутри и между строками создают одну именованную область сетки, которая охватывает соответствующие [ячейки сетки](#grid-cell).
* Токен [мусор](#grid-template-areas-trash-token) является синтаксической ошибкой и делает объявление недействительным.

Все строки должны определять одинаковое количество маркеров ячеек ([named cell tokens](#grid-template-areas-named-cell-token) и/или [null cell tokens](#grid-template-areas-null-cell-token)) и хотя бы один маркер ячейки, иначе объявление будет недействительным. Если [именованная область сетки](#named-grid-area) охватывает несколько [ячеек сетки](#grid-cell), но эти ячейки не образуют единого заполненного прямоугольника, декларация считается недействительной.

Примечание: В будущей версии модуля могут быть разрешены непрямоугольные или несвязанные области.

[](#example-9f77ebf7)В этом примере свойство [grid-template-areas](#propdef-grid-template-areas) используется для создания макета страницы, где определены области для содержимого заголовка (`head`), навигационного содержимого (`nav`), содержимого нижнего колонтитула (`foot`) и основного содержимого (`main`). Соответственно, шаблон создает три строки и две колонки с четырьмя [именованными областями сетки](#named-grid-area). Область `head` охватывает обе колонки и первую строку сетки.

#grid {
отображение: сетка;
grid-template-areas: "head head"
"nav main"
"foot ...."
}
#grid > header { grid-area: head; }
#grid > nav { grid-area: nav; }
#grid > main { grid-area: main; }
#grid > footer { grid-area: foot; }

#### 7.3.1. Сериализация строк шаблонов[](#serialize-template)

При сериализации [указанного](https://www.w3.org/TR/css-cascade-4/#specified-value) или [вычисленного значения](https://www.w3.org/TR/css-cascade-4/#computed-value) [&lt;string&gt;](https://www.w3. org/TR/css-values-3/#string-value) значения [grid-template-areas](#propdef-grid-template-areas), каждая [null cell token](#grid-template-areas-null-cell-token) сериализуется как один "." (U+002E FULL STOP), а последовательные cell tokens разделяются одним пробелом (U+0020 SPACE), все остальные пробелы исключаются.

#### 7.3.2. Неявно заданные имена строк[](#implicit-named-lines)

Свойство [grid-template-areas](#propdef-grid-template-areas) генерирует неявно назначенные имена линий из [named grid areas](#named-grid-area) в шаблоне. Для каждой именованной области сетки foo создаются четыре [неявно назначенные имена строк](#implicitly-assigned-line-name): два с именем foo-start, называющие строки начала строки и начала столбца именованной области сетки, и два с именем foo-end, называющие строки конца строки и конца столбца именованной области сетки.

Эти [неявно назначенные имена строк](#implicitly-assigned-line-name) ведут себя так же, как и любые другие [имена строк](#line-name), за исключением того, что они не появляются в значении [grid-template-rows](#propdef-grid-template-rows)/[grid-template-columns](#propdef-grid-template-columns). Даже если определено [явно назначенное имя строки](#explicitly-assigned-line-name) с тем же именем, неявно назначенные имена строк - это просто больше строк с тем же именем.

#### 7.3.3. Неявно именованные области[](#implicit-named-areas)

Поскольку на [именованную область сетки](#named-grid-area) ссылаются [неявно назначенные имена линий](#implicitly-assigned-line-name), которые она производит, явное добавление именованных линий той же формы (foo-start/foo-end) эффективно создает именованную область сетки. Такие неявно именованные области[](#implicitly-named-area) не появляются в значении параметра [grid-template-areas](#propdef-grid-template-areas), но на них по-прежнему можно ссылаться в свойствах [grid-placement](#grid-placement-property).

### 7.4. Явное сокращение сетки: свойство [grid-template](#propdef-grid-template)[](#explicit-grid-shorthand)

| | |
| --- | --- |
| Имя: | grid-template |
| [Значение:](https://www.w3.org/TR/css-values/#value-defs) | none [\|](https://www.w3.org/TR/css-values-4/#comb-one) \[ [&lt;'grid-template-rows'&gt;](#propdef-grid-template-rows) / [&lt;'grid-template-columns'&gt;](#propdef-grid-template-columns)\] \| \[ [&lt;line-names&gt;](#typedef-line-names)[?](https://www.w3.org/TR/css-values-4/#mult-opt) [&lt;string&gt;](https://www.w3.org/TR/css-values-3/#string-value) [&lt;track-size&gt;](#typedef-track-size)? &lt;line-names&gt;? \][+](https://www.w3.org/TR/css-values-4/#mult-one-plus)\[ / [&lt;explicit-track-list&gt;](#typedef-explicit-track-list)\]? |
| [Initial:](https://www.w3.org/TR/css-cascade/#initial-values) | none |
| Применяется к: | [контейнерам сетки](#grid-container)|
| | [Наследуется:](https://www.w3.org/TR/css-cascade/#inherited-property) | см. отдельные свойства |
| [Проценты:](https://www.w3.org/TR/css-values/#percentages) | см. отдельные свойства |
| [Вычисленное значение:](https://www.w3.org/TR/css-cascade/#computed) | см. отдельные свойства |
| [Тип анимации:](https://www.w3.org/TR/web-animations/#animation-type) | см. отдельные свойства |
| Канонический порядок: | согласно грамматике |

Свойство [grid-template](#propdef-grid-template) - это [сокращение](https://www.w3.org/TR/css-cascade-4/#shorthand-property) для задания [grid-template-columns](#propdef-grid-template-columns), [grid-template-rows](#propdef-grid-template-rows) и [grid-template-areas](#propdef-grid-template-areas) в одном объявлении. Имеет несколько различных синтаксических форм:

none[](#valdef-grid-template-none)

Устанавливает все три свойства в их начальные значения ([none](#valdef-grid-template-rows-none)).

[&lt;'grid-template-rows'&gt;](#propdef-grid-template-rows) / [&lt;'grid-template-columns'&gt;](#propdef-grid-template-columns)[](#grid-template-rowcol)

Устанавливает [grid-template-rows](#propdef-grid-template-rows) и [grid-template-columns](#propdef-grid-template-columns) в указанные значения, соответственно, и устанавливает [grid-template-areas](#propdef-grid-template-areas) в [none](#valdef-grid-template-areas-none).

[](#example-25dd92dd)

grid-template: auto 1fr / auto 1fr auto;

эквивалентно

grid-template-rows: auto 1fr;
grid-template-columns: auto 1fr auto;
grid-template-areas: none;

\[ [&lt;line-names&gt;](#typedef-line-names)? [&lt;string&gt;](https://www.w3.org/TR/css-values-3/#string-value) [&lt;track-size&gt;](#typedef-track-size)?&lt;line-names&gt;? \]\+ \[ / [&lt;explicit-track-list&gt;](#typedef-explicit-track-list)\]?[](#grid-template-ascii)

* Устанавливает [grid-template-areas](#propdef-grid-template-areas) на перечисленные строки.

* Устанавливает [grid-template-rows](#propdef-grid-template-rows) на [&lt;track-size&gt;](#typedef-track-size), следующие за каждой строкой (заполняя [auto](#valdef-grid-template-columns-auto) для всех отсутствующих размеров), и вставляя именованные строки, определенные до/после каждого размера.

* Устанавливает [grid-template-columns](#propdef-grid-template-columns) на список треков, указанный после слэша (или [none](#valdef-grid-template-rows-none), если он не указан).


Этот синтаксис позволяет автору выровнять названия и размеры треков в линию с соответствующими областями сетки.

[](#example-e7e1afc0)

grid-template: \[header-top\] "a a a" \[header-bottom\]
\[main-top\] "b b b" 1fr \[main-bottom\]
/ auto 1fr auto;

эквивалентно

grid-template-areas: "a a a"
"b b b";
grid-template-rows: \[header-top\] auto \[header-bottom main-top\] 1fr \[main-bottom\];
grid-template-columns: auto 1fr auto;

и создает следующую сетку:

* Три колонки размером [auto](#valdef-grid-template-columns-auto), 1fr и [auto](#grid-placement-auto), соответственно.
* Две строки размером [auto](#grid-placement-auto) и 1fr, соответственно.
* Строка с именами "header-top" и "a-start" вверху, строка с четырьмя именами - "header-bottom", "main-top", "a-end" и "b-start" - в середине, строка с именами "main-bottom" и "b-end" внизу.
* Линия с именами "a-start" и "b-start" на левом краю, и линия с именами "a-end" и "b-end" на правом краю.

Сетка, созданная с помощью деклараций выше. (Имена "a/b-start/end" [неявно назначены](#implicitly-assigned-line-name) [именованными областями сетки](#named-grid-area)).

Примечание: Обратите внимание, что функция [repeat()](#funcdef-repeat) не допускается в этих списках треков, так как треки должны визуально выстраиваться один к одному со строками/колонками в "ASCII-арте".

Примечание: Сокращение [grid](#propdef-grid) принимает тот же синтаксис, но также сбрасывает неявные свойства сетки к их начальным значениям. Если авторы не хотят, чтобы они каскадировались отдельно, рекомендуется использовать grid вместо [grid-template](#propdef-grid-template).

### 7.5. Неявная сетка[](#implicit-grids)

Свойства [grid-template-rows](#propdef-grid-template-rows), [grid-template-columns](#propdef-grid-template-columns) и [grid-template-areas](#propdef-grid-template-areas) определяют фиксированное количество дорожек, которые формируют [явную сетку](#explicit-grid). Когда элементы [сетки](#grid-item) располагаются вне этих границ, [контейнер сетки](#grid-container) генерирует дорожки неявной сетки, добавляя линии неявной сетки к [сетке](#grid). Эти линии вместе с явной сеткой образуют неявную сетку. Свойства [grid-auto-rows](#propdef-grid-auto-rows) и [grid-auto-columns](#propdef-grid-auto-columns) определяют размер этих [неявных путей сетки](#implicit-grid-track), а также любых [явных путей сетки](#explicit-grid-track), созданных grid-template-areas, но не имеющих явного размера с помощью grid-template-rows или grid-template-columns.

Свойство [grid-auto-flow](#propdef-grid-auto-flow) управляет автоматическим размещением [элементов сетки](#grid-item) без явного указания позиции. После заполнения [явной сетки](#explicit-grid) (или при отсутствии явной сетки) автоперемещение также вызовет генерацию [неявных треков сетки](#implicit-grid-track).

Свойство [grid](#propdef-grid) [сокращение](https://www.w3.org/TR/css-cascade-4/#shorthand-property) может задавать свойства неявной сетки ([grid-auto-flow](#propdef-grid-auto-flow), [grid-auto-rows](#propdef-grid-auto-rows) и [grid-auto-columns](#propdef-grid-auto-columns)) вместе со свойствами [explicit grid](#explicit-grid-properties) в одном объявлении.

### 7.6. Неявное определение размера дорожек: свойства [grid-auto-rows](#propdef-grid-auto-rows) и [grid-auto-columns](#propdef-grid-auto-columns)[](#auto-tracks)

| | |
| --- | --- |
| Имя: | grid-auto-columns, grid-auto-rows |
| [Значение:](https://www.w3.org/TR/css-values/#value-defs) | [&lt;track-size&gt;](#typedef-track-size)[+](https://www.w3.org/TR/css-values-4/#mult-one-plus)|
| [Начальное значение:](https://www.w3.org/TR/css-cascade/#initial-values) | auto |
| Применяется к: | [контейнерам сетки](#grid-container)|
| [Наследуется:](https://www.w3.org/TR/css-cascade/#inherited-property) | нет |
| [Проценты:](https://www.w3.org/TR/css-values/#percentages) | см. [Track Sizing](#track-sizing) |
| [Вычисленное значение:](https://www.w3.org/TR/css-cascade/#computed) | см. [Track Sizing](#track-sizing) |
| Канонический порядок: | согласно грамматике |
| [Тип анимации:](https://www.w3.org/TR/web-animations/#animation-type) | по типу вычисляемого значения |

Свойства [grid-auto-columns](#propdef-grid-auto-columns) и [grid-auto-rows](#propdef-grid-auto-rows) задают размер дорожек, которым не присвоен размер с помощью [grid-template-rows](#propdef-grid-template-rows) или [grid-template-columns](#propdef-grid-template-columns). Если задано несколько размеров дорожек, шаблон повторяется по мере необходимости, чтобы найти размер затронутых дорожек. Первая дорожка после последней дорожки с явным размером получает первый указанный размер, и так далее вперед; а последняя дорожка [неявной сетки](#implicit-grid-track) перед [явной сеткой](#explicit-grid) получает последний указанный размер, и так далее назад.

Примечание: Если элемент сетки размещается в строке или столбце, которые не объявлены явно в [grid-template-rows](#propdef-grid-template-rows)/[grid-template-columns](#propdef-grid-template-columns) и/или [grid-template-areas](#propdef-grid-template-areas), для его размещения создаются [implicit grid tracks](#implicit-grid-track). Это может произойти либо при явном позиционировании в строку или столбец, которые находятся вне диапазона, либо при помощи [алгоритма авторазмещения](#grid-item-placement-algorithm), создающего дополнительные строки или столбцы.

[](#example-b32ffb8f)

<style>
  #grid {
    отображение: grid;
    grid-template-columns: 20px;
    grid-auto-columns: 40px;
    grid-template-rows: 20px;
    grid-auto-rows: 40px;
  }
  #A { grid-column: 1; grid-row: 1; }
  #B { grid-column: 2; grid-row: 1; }
  #C { grid-column: 1; grid-row: 2; }
  #D { grid-column: 2; grid-row: 2; }
</style>

<div id="grid">
  <div id="A">A</div>
  <div id="B">B</div>
  <div id="C">C</div>
  <div id="D">D</div>
</div>

![](images/auto-flow.svg)

Сетка 2×2 с одной явной ячейкой сетки 20px×20px в первой строке+столбце и тремя дополнительными ячейками, полученными в результате неявного создания столбцов и строк по 40px для размещения дополнительных элементов сетки.

### 7.7. Автоматическое размещение: свойство [grid-auto-flow](#propdef-grid-auto-flow)[](#grid-auto-flow-property)

| | |
| --- | --- |
| Имя: | grid-auto-flow |
| [Значение:](https://www.w3.org/TR/css-values/#value-defs) | \[ строка [\|](https://www.w3.org/TR/css-values-4/#comb-one) столбец \] [\|](https://www.w3.org/TR/css-values-4/#comb-any) плотный |
| [Начальное значение:](https://www.w3.org/TR/css-cascade/#initial-values) | row |
| Применяется к: | [контейнерам сетки](#grid-container)|
| [Унаследовано:](https://www.w3.org/TR/css-cascade/#inherited-property) | нет |
| [Проценты:](https://www.w3.org/TR/css-values/#percentages) | n/a |
| [Вычисленное значение:](https://www.w3.org/TR/css-cascade/#computed) | указанное ключевое слово(а) |
| Канонический порядок: | по грамматике |
| [Тип анимации:](https://www.w3.org/TR/web-animations/#animation-type) | дискретный |

[Элементы сетки](#grid-item), которые не размещены явно, автоматически помещаются в незанятое место в [контейнере сетки](#grid-container) с помощью [алгоритма авторазмещения](#grid-item-placement-algorithm). [grid-auto-flow](#propdef-grid-auto-flow) управляет работой алгоритма авторазмещения, указывая, как именно авторазмещаемые элементы попадают в сетку. Подробности о том, как именно работает алгоритм авторазмещения, см. в [§ 8.5 Алгоритм размещения элементов сетки](#auto-placement-algo).

строка

Алгоритм [auto-placement](#grid-item-placement-algorithm) размещает элементы, заполняя каждый ряд по очереди, добавляя новые ряды по мере необходимости. Если не указаны ни [row](#valdef-grid-auto-flow-row), ни [column](#valdef-grid-auto-flow-column), то предполагается row.

столбец

Алгоритм [автоматического размещения](#grid-item-placement-algorithm) размещает элементы, заполняя каждый столбец по очереди, добавляя новые столбцы по мере необходимости.

dense

Если указано, то [алгоритм автоматического размещения](#grid-item-placement-algorithm) использует алгоритм "плотной" упаковки, который пытается заполнить дыры раньше в сетке, если более мелкие элементы появляются позже. Это может привести к тому, что элементы будут располагаться не по порядку, если это приведет к заполнению дыр, оставленных более крупными элементами.

Если этот параметр опущен, используется "разреженный" алгоритм, при котором алгоритм размещения перемещается только вперед по сетке при размещении элементов, никогда не возвращаясь назад для заполнения дыр. Это гарантирует, что все автоматически размещаемые элементы появляются "по порядку", даже если при этом остаются дыры, которые могли бы быть заполнены более поздними элементами.

Примечание: Ожидается, что в будущем уровне этого модуля будет добавлено значение, объединяющее авторазмещаемые элементы в одну ячейку "по умолчанию".

Авторазмещение происходит по [элементам сетки](#grid-item) в [порядке, измененном порядком документа](https://www.w3.org/TR/css-flexbox-1/#order-modified-document-order).

[](#example-cd19a8c5)В следующем примере есть три столбца, каждый из которых имеет авторазмер в соответствии со своим содержимым. Строки явно не определены. Свойство [grid-auto-flow](#propdef-grid-auto-flow) - [row](#valdef-grid-auto-flow-row), которое предписывает сетке искать по трем столбцам, начиная с первой строки, затем со следующей, добавляя строки по мере необходимости, пока не будет найдено достаточно места для размещения любого автоматически размещаемого [элемента сетки](#grid-item).

![Изображение: Форма, организованная с помощью автоматического размещения.](images/auto-placed-form.png)

Форма, оформленная с помощью автоматического размещения.

&lt;style type="text/css"&gt;
форма {
display: grid;
/\* Определите три колонки, все размером с контент,
и назовите соответствующие строки. */
grid-template-columns: \[labels\] auto \[controls\] auto \[oversized\] auto;
grid-auto-flow: row dense;
}
form > label {
/\* Поместите все метки в колонку "labels" и
автоматически находит следующую доступную строку. */
grid-column: labels;
grid-row: auto;
}
form > input, form > select {
/\* Поместите все элементы управления в столбец "controls" и
автоматически находит следующую доступную строку. */
grid-column: controls;
grid-row: auto;
}

#department-block {
/\* Автоматическое размещение этого элемента в колонке "негабарит"
в первой строке, где область, охватывающая три строки
не перекрывает другие явно размещенные элементы или области
или любые элементы, автоматически размещенные до этой области. */
grid-column: oversized;
grid-row: span 3;
}

/\* Поместите все кнопки формы
в явно определенной области сетки. */
#buttons {
grid-row: auto;

/\* Убедитесь, что область кнопок охватывает весь элемент сетки
по оси inline. */
grid-column: 1 / -1;
text-align: end;
}
&lt;/style&gt;
&lt;Форма&gt;
&lt;label for="firstname"&gt; Имя и фамилия:&lt;/label&gt;
&lt;input type="text" id="firstname" name="firstname" /&gt;
&lt;label for="lastname"&gt;Фамилия:&lt;/label&gt;
&lt;input type="text" id="lastname" name="фамилия" /&gt;
&lt;label for="address"&gt;Адрес:&lt;/label&gt;
&lt;input type="text" id="адрес" name="адрес" /&gt;
&lt;label for="address2"&gt;Адрес 2:&lt;/label&gt;
&lt;input type="text" id="address2" name="address2" /&gt;
&lt;label for="city"&gt;Город:&lt;/label&gt;
&lt;input type="text" id="city" name="city" /&gt;
&lt;label for="state"&gt;State:&lt;/label&gt;
&lt;select type="text" id="state" name="state"&gt;
&lt;option value="WA"&gt; Вашингтон&lt;/option&gt;
&lt;/select&gt;
&lt;label for="zip"&gt; Zip:&lt;/label&gt;
&lt;input type="text" id="zip" name="zip" /&gt;

&lt;div id="department-block"&gt;
&lt;label for="department"&gt; Department:&lt;/label&gt;
&lt;select id="department" name="department" multiple&gt;
&lt;option value="финансы"&gt;Финансы&lt;/option&gt;
&lt;option value="humanresources"&gt;Отдел кадров&lt;/option&gt;
&lt;option value="marketing"&gt;Маркетинг&lt;/option&gt;
&lt;/select&gt;
&lt;/div&gt;

&lt;div id="buttons"&gt;
&lt;button id="cancel"&gt; &lt;Cancel&lt;/button&gt;
&lt;button id="back"&gt;Back&lt;/button&gt;
&lt;button id="next"&gt;Next&lt;/button&gt;
&lt;/div&gt;
&lt;/form&gt;

### 7.8. Сокращение определения сетки: свойство [grid](#propdef-grid)[](#grid-shorthand)

| | |
| --- | --- |
| Имя: | grid |
| [Значение:](https://www.w3.org/TR/css-values/#value-defs) | [&lt;'grid-template'&gt;](#propdef-grid-template) [\|](https://www.w3.org/TR/css-values-4/#comb-one) [&lt;'grid-template-rows'&gt;](#propdef-grid-template-rows) / \[ auto-flow [&&](https://www.w3.org/TR/css-values-4/#comb-all) dense[?](https://www.w3.org/TR/css-values-4/#mult-opt)\] [&lt;'grid-auto-columns'&gt;](#propdef-grid-auto-columns)? \| \[ auto-flow [&&](https://www.w3.org/TR/css-values-4/#comb-all) dense[?](https://www.w3.org/TR/css-values-4/#mult-opt)\] [&lt;'grid-auto-rows'&gt;](#propdef-grid-auto-rows)? / [&lt;'grid-template-columns'&gt;](#propdef-grid-template-columns) |
| [Initial:](https://www.w3.org/TR/css-cascade/#initial-values) | none |
| Применяется к: | [контейнерам сетки](#grid-container)|
| [Наследуется:](https://www.w3.org/TR/css-cascade/#inherited-property) | см. отдельные свойства |
| [Проценты:](https://www.w3.org/TR/css-values/#percentages) | см. отдельные свойства |
| [Вычисленное значение:](https://www.w3.org/TR/css-cascade/#computed) | см. отдельные свойства |
| [Тип анимации:](https://www.w3.org/TR/web-animations/#animation-type) | см. отдельные свойства |
| Канонический порядок: | согласно грамматике |

Свойство [grid](#propdef-grid) - это [сокращение](https://www.w3. org/TR/css-cascade-4/#shorthand-property), которое задает все [явные свойства сетки](#explicit-grid-properties) ([grid-template-rows](#propdef-grid-template-rows), [grid-template-columns](#propdef-grid-template-columns), и [grid-template-areas](#propdef-grid-template-areas)), и все [неявные свойства сетки](#implicit-grid-properties) ([grid-auto-rows](#propdef-grid-auto-rows), [grid-auto-columns](#propdef-grid-auto-columns) и [grid-auto-flow](#propdef-grid-auto-flow)), в одном объявлении. (При этом свойства [gutter](https://www.w3.org/TR/css-align-3/#gutter) не сбрасываются). Его синтаксис соответствует [grid-template](#propdef-grid-template), плюс дополнительная синтаксическая форма для определения сетки с автопотоком:

[&lt;'grid-template-rows'&gt;](#propdef-grid-template-rows) / \[ auto-flow && dense? \] [&lt;'grid-auto-columns'&gt;](#propdef-grid-auto-columns)?[](#grid-s-auto-row)

\[ auto-flow && dense? \] [&lt;'grid-auto-rows'&gt;](#propdef-grid-auto-rows)? / [&lt;'grid-template-columns'&gt;](#propdef-grid-template-columns)[](#grid-s-auto-column)

Устанавливает автопоток, явно задавая пути по одной оси (устанавливая либо [grid-template-rows](#propdef-grid-template-rows), либо [grid-template-columns](#propdef-grid-template-columns), как указано, и устанавливая для другой [none](#valdef-grid-template-rows-none)), и указание способа автоповтора треков по другой оси (установка либо [grid-auto-rows](#propdef-grid-auto-rows), либо [grid-auto-columns](#propdef-grid-auto-columns), как указано, и установка другого значения на auto). Для [grid-auto-flow](#propdef-grid-auto-flow) также устанавливается либо [row](#valdef-grid-auto-flow-row), либо [column](#valdef-grid-auto-flow-column) соответственно, с [dense](#valdef-grid-auto-flow-dense), если он указан.

Все остальные [grid](#propdef-grid) [sub-properties](https://www.w3.org/TR/css-cascade-4/#longhand) сбрасываются к своим первоначальным значениям.

Примечание: Обратите внимание, что в одном объявлении [grid](#propdef-grid) можно указать только явные _или_ неявные свойства сетки. Подсвойства, которые вы не указали, устанавливаются в начальное значение, как обычно для [shorthands](https://www.w3.org/TR/css-cascade-4/#shorthand-property).

[](#example-dec34e0f)В дополнение к принятию синтаксиса [grid-template](#propdef-grid-template) для установки [explicit grid](#explicit-grid), стенограмма [grid](#propdef-grid) также может легко установить параметры для автоформатируемой сетки. Например, grid: auto-flow 1fr / 100px; эквивалентно

grid-template: none / 100px;
grid-auto-flow: row;
grid-auto-rows: 1fr;
grid-auto-columns: auto;

Аналогично, [grid: none / auto-flow 1fr](#propdef-grid) эквивалентно

шаблон сетки: нет;
grid-auto-flow: column;
grid-auto-rows: auto;
grid-auto-columns: 1fr;
