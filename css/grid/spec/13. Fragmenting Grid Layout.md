13\. Фрагментация макета сетки[](#pagination)
-------------------------------------------

[Контейнеры сетки](#grid-container) могут разбивать страницы между строками или столбцами и внутри элементов. Свойства [break-*](https://www.w3.org/TR/css-break-3/#propdef-break-before) применяются к контейнерам сетки как обычно для контекста форматирования, в котором они участвуют. В этом разделе определено, как они применяются к элементам сетки и содержимому элементов сетки.

Следующие правила разбиения относятся к [контейнеру фрагментации](https://www.w3.org/TR/css-break-4/#fragmentation-container) как к "странице". Те же правила действуют в любом другом [контексте фрагментации](https://www.w3.org/TR/css-break-4/#fragmentation-context). (При необходимости замените "page" на соответствующий тип контейнера фрагментации). См. модуль [Фрагментация CSS](https://www.w3.org/TR/css-break/) [\[CSS3-BREAK\]](#biblio-css3-break).

Точное расположение фрагментированного контейнера сетки не определено на этом уровне Grid Layout. Однако разрывы внутри контейнера сетки подчиняются следующим правилам:

* Свойства [break-before](https://www.w3.org/TR/css-break-3/#propdef-break-before) и [break-after](https://www.w3.org/TR/css-break-3/#propdef-break-after) для [элементов сетки](#grid-item) распространяются на их ряд сетки. Свойство break-before для первой строки и свойство break-after для последней строки распространяются на контейнер сетки.
* Принудительный разрыв внутри элемента сетки эффективно увеличивает размер его содержимого; он не вызывает принудительного разрыва внутри элементов-смежников.
* [Возможности разрыва класса A](https://www.w3.org/TR/css3-break/#btw-blocks) возникают между строками или столбцами (в зависимости от того, что находится на соответствующей оси), а [Возможности разрыва класса C](https://www.w3.org/TR/css3-break/#end-block) возникают между первой/последней строкой (столбцом) и границами содержимого контейнера сетки. [\[CSS3-BREAK\]](#biblio-css3-break)
* Когда контейнер сетки продолжается после разрыва, пространство, доступное для его [элементов сетки](#grid-item) (в направлении потока блоков контекста фрагментации), уменьшается за счет пространства, занятого фрагментами контейнера сетки на предыдущих страницах. Пространство, занимаемое фрагментом контейнера сетки, равно размеру его поля содержимого на этой странице. Если в результате этой корректировки доступное пространство становится отрицательным, оно устанавливается равным нулю.
* Помимо перестановки элементов, навязанной предыдущим пунктом, UA должны попытаться минимизировать искажение контейнера сетки по отношению к нефрагментированному потоку.

### 13.1. Пример алгоритма фрагментации[](#fragmentation-alg)

Этот раздел не является нормативным.

Это черновой вариант одного из возможных алгоритмов фрагментации, и он все еще нуждается в серьезной перекрестной проверке с алгоритмом [\[CSS-FLEXBOX-1\]](#biblio-css-flexbox-1) для согласованности. Отзывы приветствуются; пожалуйста, обратитесь к приведенным выше правилам в качестве руководства по применению.

1.  Разместите сетку в соответствии с [§ 12 Grid Sizing](#layout-algorithm), используя встроенный размер [fragmentation container](https://www.w3.org/TR/css-break-4/#fragmentation-container) и предполагая неограниченный размер блока. На этом этапе должны быть разрешены все значения [grid-row](#propdef-grid-row) [auto](#grid-placement-auto) и [fr](#valdef-flex-fr).
2.  Разместите контейнер сетки, используя значения, разрешенные в предыдущем шаге.
3.  Если размер [области сетки](#grid-area) изменяется из-за фрагментации (не включайте в это решение элементы, которые охватывают строки), увеличьте размер строки сетки по мере необходимости для строк, которые либо:
* имеют функцию определения размера содержимого min track.
* находятся в сетке, у которой нет явной высоты, и строка сетки является гибкой.
4.  Если высота сетки [auto](#grid-placement-auto), высота сетки должна быть равна сумме конечных размеров строк.
5.  Если область сетки переполняет контейнер сетки из-за сворачивания полей во время фрагментации, расширьте контейнер сетки, чтобы вместить эту область сетки (этот шаг необходим, чтобы избежать круговых зависимостей макета из-за фрагментации).

Если высота сетки задана, шаги три и четыре могут привести к переполнению строк сетки.
